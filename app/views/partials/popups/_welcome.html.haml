/ BEGIN .popup-welcome
.popup.popup_welcome.js-popup
  .popup__top
    %button.popup__btn-close &times;
    .popup__title= t 'popup.welcome'
  .popup__in
    .popup__row
      .popup__col.popup__col_left
        = form_for :user, url: sap.user_session_path, remote: true, :html => {class: '_popup_signin_form'} do |f|
          .popup__message
            %h2= t 'popup.enter'
          %label.label
            %span.label__title= t 'popup.label.login'
            %span.label__in
              %i.ico-login
              = f.text_field :login, {class: 'label__txt'}
          %label.label
            %span.label__title= t 'popup.label.password'
            %span.label__in
              %i.ico-pass
              = f.password_field :password, {class: 'label__txt'}

          %button.btn= t 'popup.button.enter'
          .popup__pass-forgot
            %a{href: remember_path, target: '_blank'}= t 'popup.forget_password'
          .popup__pass-help
            *
            = t 'popup.required_fields'
      .popup__col.popup__col_right
        = form_for :user, url: sap.user_registration_path, remote: true, :html => {class: '_popup_signup_form'} do |f|
          .popup__message
            %h2= t 'popup.register'
          %label.label
            %span.label__title
              = t 'popup.label.name'
              *
            %span.label__in
              %i.ico-login
              = f.text_field :name, {class: 'label__txt'}
          %label.label
            %span.label__title
              = t 'popup.label.phone'
              *
            %span.label__in
              %i.ico-phone
              = f.text_field :phone, {class: 'label__txt', alias: :login}
          %label.label
            %span.label__title
              = t 'popup.label.password'
            %span.label__in
              %i.ico-pass
              = f.password_field :password, {class: 'label__txt'}
          %button.btn= t 'popup.button.ready'
/ END .popup-welcome

:javascript
  $(function(){

    $('._popup_signup_form').ajaxForm({
      form_name: 'user',
      onSuccess: function(response){
        $(document).trigger(UserState.prototype.EVT_UPDATE);
        window.$gmPopup.ajaxPopup('hide');
      }
    });

    $('._popup_signin_form').ajaxForm({
      form_name: 'user',
      error: {
        direction: 'right'
      },
      onSuccess: function(response){
        $(document).trigger(UserState.prototype.EVT_UPDATE);
        window.$gmPopup.ajaxPopup('hide');
      }
    });
  });

